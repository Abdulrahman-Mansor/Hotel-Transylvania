/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JPanel.java to edit this template
 */
package Bill;

import Employee.E_Scroll;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.Date;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.BoxLayout;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;

/**
 *
 * @author AhmedMagedMohamedHas
 */
public class Scrool extends javax.swing.JPanel {

    /**
     * Creates new form Scrool
     */
    ResultSet rs;
    private JPanel innerPanel;
    private JScrollPane jScrollPane1;
    public Scrool() {
        initComponents();
        Price.setText("");
    }
    public void clear(){
        Scroll.removeAll();
        Scroll.revalidate();
        Scroll.repaint();
        Price.setText("");
    }
    public double change(int clientid,float roomPrice, long days) {
        Scroll.removeAll();
        Scroll.revalidate();
        Scroll.repaint();
        Price.setText(String.valueOf(roomPrice * days));
        System.out.println("we entered the change funciton");
        Scroll.setPreferredSize(new Dimension(512, 243));
        jScrollPane1 = new raven.scroll.win11.ScrollPaneWin11();
        String sqlqurey;
        sqlqurey = "SELECT askFor.serviceType, askFor.SName, Service.price\n" +
                    "FROM Client\n" +
                    "JOIN askFor ON askFor.ClientID = Client.ClientID\n" +
                    "JOIN Service ON askFor.SName = Service.SName and askFor.serviceType = Service.ServiceType\n" +
                    "WHERE Client.ClientID = "+clientid+";";
        try {
            Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
            Connection con = DriverManager.getConnection("jdbc:sqlserver://localhost:1433;databaseName=Hotel;encrypt=true;trustServerCertificate=true", "Admin", "1234");
            PreparedStatement pst = con.prepareStatement(sqlqurey);
            rs = pst.executeQuery();
        } catch (Exception e) {
            JOptionPane.showMessageDialog(null, e);
        }
        innerPanel = new JPanel();
        innerPanel.setLayout(new BoxLayout(innerPanel, BoxLayout.Y_AXIS));
        double servicesSum = 0f;
        try {
            while (rs.next()) {
                System.out.println("we enterd the next");
                String SName = rs.getString("SName");
                String type = rs.getString("ServiceType");
                float price = rs.getFloat("price");
                servicesSum += price;
                Bill.Record r = new Bill.Record(SName+" "+type,Float.toString(price));
                r.setPreferredSize(new Dimension(512, 45));
                innerPanel.add(r);
                JPanel subPanel = new JPanel();
                subPanel.setPreferredSize(new Dimension(512, 5));
                subPanel.setMaximumSize(new Dimension(512, 5));
                subPanel.setMinimumSize(new Dimension(512, 5));
                subPanel.setBackground(new Color(135,135,135));
                innerPanel.add(subPanel);
                System.out.println(SName);
                System.out.println(type);
            }
        } catch (SQLException ex) {
            Logger.getLogger(E_Scroll.class.getName()).log(Level.SEVERE, null, ex);
        }
        innerPanel.revalidate();
        innerPanel.repaint();
        this.revalidate();
        this.repaint();
        innerPanel.setBackground(new Color(255,255,255));
        jScrollPane1.setViewportView(innerPanel);
        Scroll.add(jScrollPane1, BorderLayout.CENTER);
        return servicesSum + (roomPrice * days);
    }
    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel1 = new MainPanels.CenterPanelChildForm();
        jLabel1 = new javax.swing.JLabel();
        Price = new javax.swing.JLabel();
        Scroll = new javax.swing.JPanel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();

        setMaximumSize(new java.awt.Dimension(490, 324));
        setMinimumSize(new java.awt.Dimension(490, 324));
        setPreferredSize(new java.awt.Dimension(490, 324));

        jPanel1.setBackground(new java.awt.Color(27, 132, 182));
        jPanel1.setForeground(new java.awt.Color(255, 255, 255));

        jLabel1.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        jLabel1.setForeground(new java.awt.Color(255, 255, 255));
        jLabel1.setText("Room Price: ");

        Price.setForeground(new java.awt.Color(255, 255, 255));
        Price.setText("jLabel2");

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(62, 62, 62)
                .addComponent(jLabel1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(Price, javax.swing.GroupLayout.PREFERRED_SIZE, 48, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(77, 77, 77))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel1)
                    .addComponent(Price))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        Scroll.setBackground(new java.awt.Color(255, 255, 255));
        Scroll.setPreferredSize(new java.awt.Dimension(243, 370));
        Scroll.setLayout(new java.awt.BorderLayout());

        jLabel2.setText("Service");

        jLabel3.setText("Price");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(Scroll, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
            .addGroup(layout.createSequentialGroup()
                .addGap(99, 99, 99)
                .addComponent(jLabel2, javax.swing.GroupLayout.PREFERRED_SIZE, 79, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 187, Short.MAX_VALUE)
                .addComponent(jLabel3)
                .addGap(99, 99, 99))
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(34, 34, 34)
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel2)
                    .addComponent(jLabel3))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(Scroll, javax.swing.GroupLayout.DEFAULT_SIZE, 212, Short.MAX_VALUE)
                .addContainerGap())
        );
    }// </editor-fold>//GEN-END:initComponents


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel Price;
    private javax.swing.JPanel Scroll;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JPanel jPanel1;
    // End of variables declaration//GEN-END:variables
}
